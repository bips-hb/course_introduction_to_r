{
  "hash": "f30eebbca3cdea39a8488426169dc8a6",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"5: The Whole Game\"\nformat: \n  html:\n    toc: true\neditor: visual\n---\n\n\n\nBy now we have enough useful tools at our disposal practice an exploratory analysis:\n\n1.  Read a dataset from a file\n2.  Explore it using tidyverse verbs\n3.  Visualize potentially interesting variable using `ggplot2`\n\nWe will first go through these steps and then build on them by introducing additional tools for statistical reporting, but throughout this last piece of the course there will be fewer code examples and more room for you to experiment!\nThis will take some time, so don't worry if you don't get everything down right the first time or if we don't finish this chapter before the end of the course.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n:::\n\n\n\n## Importing Data\n\nSo far we have played with example data and the `gapminder` data, but now it's time to start with something fresh and unfamiliar.\n\nThe dataset we'll explore is called \"chemo\", and you can find it in the `data-raw` directory in these workshop materials.\nIt is stored as a CSV file called `\"chemo.csv\"`, and to import it you *could* use the built-in function `read.csv()`, but to be more tidyverse-focused we'll use the `readr` package and the `read_csv()` function, which is a tad more flexible and more user-friendly.\nWe'll give it the name `chemo` from here on out!\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nchemo <- readr::read_csv(\"data-raw/chemo.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 200 Columns: 8\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): trt, stage, grade\ndbl (5): age, marker, response, death, ttdeath\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\nchemo\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 200 × 8\n   trt      age marker stage grade response death ttdeath\n   <chr>  <dbl>  <dbl> <chr> <chr>    <dbl> <dbl>   <dbl>\n 1 Drug A    23  0.16  T1    II           0     0    24  \n 2 Drug B     9  1.11  T2    I            1     0    24  \n 3 Drug A    31  0.277 T1    II           0     0    24  \n 4 Drug A    NA 10.3   T3    III          1     1    17.6\n 5 Drug A    51  2.77  T4    III          1     1    16.4\n 6 Drug B    39  0.613 T4    I            0     1    15.6\n 7 Drug A    37  0.354 T1    II           0     0    24  \n 8 Drug A    32  1.74  T1    I            0     1    18.4\n 9 Drug A    31  0.144 T1    II           0     0    24  \n10 Drug B    34  0.205 T3    I            0     1    10.5\n# ℹ 190 more rows\n```\n\n\n:::\n:::\n\n\n\nHere is an basic data dictionary for the `chemo` dataset:\n\n| Variable   | Description                          |\n|:-----------|:-------------------------------------|\n| `trt`      | Treatment group                      |\n| `age`      | Age in years                         |\n| `marker`   | Marker level (ng/mL)                 |\n| `stage`    | Tumor stages `T1` through `T4`       |\n| `grade`    | Tumor grade `I`, `II`, `III`         |\n| `response` | Tumor response (`0` = no, `1` = yes) |\n| `death`    | Death (`0` = no, `1` = yes)          |\n| `ttdeath`  | Months to death                      |\n\n1.  Show the number of observations\n    -   of the whole dataset\n    -   per treatment group\n    -   per treatment group and `stage`\n2.  For the `age` and `marker`,\n    -   Calculate common statistics (range, mean, ...)\n    -   Also visualize the variables appropriately and note anything unusual\n3.  Give counts and proportions of `response` and `death`\n\n\n\n::: {.cell}\n\n:::\n\n\n\n## Data Cleaning\n\nData cleaning encompasses anything we might want to or need to change about the dataset before we do any actual analysis.\nThis can be for cosmetic reasons, like renaming variables or recoding variables from a numeric \"0 or 1\" to a readable \"no or yes\".\n\n### Plausibility\n\n1.  Both `age` and `marker` contain missing values as you should have seen earlier. Substitute them with the median value of each variable. This is a simple imputation technique that's not good enough for a clinical trial, but good enough for our purposes!\n\n\n\n::: {.cell}\n\n:::\n\n\n\n2.  A histogram of `marker` looks odd. There appears to be a strong outlier, maybe more?\n    a.  For positive outliers we can \"clip\" them to e.g. the 95% quantile of the data.\n    b.  Are there other implausible values? What could be done about them?\n\n\n\n::: {.cell}\n\n:::\n\n\n\n### Cosmetics\n\nOnce the data is clean in the \"looks plausible\" sense, we can do some cosmetic changes.\n\n1.  Recode `response` and `death` to new variables such that 1 -\\> \"Yes\" and 0 -\\> \"No\"\n    -   The new variable names should be `response_text` and `death_text` while keeping the original ones!\n    -   Both variables should be `factors` sorted with `Yes` in the first position\n    -   You can use the regular `ifelse()` or `dplyr::if_else()` for this\n2.  Create a categorized age variable in 10 year groups, e.g. \\<=10, 11–20, etc.\n    -   Likely `case_when()` from `dplyr` is easiest to do this, albeit a bit verbose\n    -   Alternative: Try `cut()`, which might be harder to use but more compact\n3.  Rename the `ttdeath` variable to `time` and the `death` variable to `status`\n    -   The verb for this is `rename()`!\n\n\n\n::: {.cell}\n\n:::\n\n\n\n### Don't Forget to Save\n\nBy now we have modified version of our `chemo` dataset with a few changes we don't want to lose, so let's save it as a file either for sharing with colleagues or just as the starting point for subsequent analyses.\n\nWrite the dataset as a file to the `data` directory, once as an \"RDS\" file and once as a CSV file but with `;` as the delimiter.\n\n\n\n::: {.cell}\n\n:::\n\n\n\n## Getting Ready for Publishing\n\nNow that our data is a bit cleaner, we want to do some actual analysis.\\\nWe assume that the research question here is quite clear: There are two chemotherapy treatment groups in `trt`, and we're interested in any differences between the two groups.\n\nWe will approach this both descriptively and also with a bit of statistics.\n\n### Descriptives\n\nFor any kind of research, there's always tables.\nTons and tons of tables.\\\nMakign tables in R used to be a lot less comfortable than it is now, thanks to great packages like `table1` and `gtsummary`.\nWe'll use `gtsummary` for a few common descriptive tables:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gtsummary)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nchemo |>\n    select(trt, stage, grade, age) |>\n    tbl_summary()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"gokvphqzse\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#gokvphqzse table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#gokvphqzse thead, #gokvphqzse tbody, #gokvphqzse tfoot, #gokvphqzse tr, #gokvphqzse td, #gokvphqzse th {\n  border-style: none;\n}\n\n#gokvphqzse p {\n  margin: 0;\n  padding: 0;\n}\n\n#gokvphqzse .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#gokvphqzse .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#gokvphqzse .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#gokvphqzse .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#gokvphqzse .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#gokvphqzse .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gokvphqzse .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#gokvphqzse .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#gokvphqzse .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#gokvphqzse .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#gokvphqzse .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#gokvphqzse .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#gokvphqzse .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#gokvphqzse .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#gokvphqzse .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#gokvphqzse .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#gokvphqzse .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#gokvphqzse .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#gokvphqzse .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gokvphqzse .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#gokvphqzse .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#gokvphqzse .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#gokvphqzse .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gokvphqzse .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#gokvphqzse .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#gokvphqzse .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gokvphqzse .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gokvphqzse .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#gokvphqzse .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gokvphqzse .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#gokvphqzse .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gokvphqzse .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#gokvphqzse .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gokvphqzse .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#gokvphqzse .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gokvphqzse .gt_left {\n  text-align: left;\n}\n\n#gokvphqzse .gt_center {\n  text-align: center;\n}\n\n#gokvphqzse .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#gokvphqzse .gt_font_normal {\n  font-weight: normal;\n}\n\n#gokvphqzse .gt_font_bold {\n  font-weight: bold;\n}\n\n#gokvphqzse .gt_font_italic {\n  font-style: italic;\n}\n\n#gokvphqzse .gt_super {\n  font-size: 65%;\n}\n\n#gokvphqzse .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#gokvphqzse .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#gokvphqzse .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#gokvphqzse .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#gokvphqzse .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#gokvphqzse .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#gokvphqzse .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#gokvphqzse .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#gokvphqzse div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"label\"><span data-qmd-base64=\"PHN0cm9uZz5DaGFyYWN0ZXJpc3RpYzwvc3Ryb25nPg==\"><span class='gt_from_md'><strong>Characteristic</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_0\"><span data-qmd-base64=\"PHN0cm9uZz5OID0gMjAwPC9zdHJvbmc+\"><span class='gt_from_md'><strong>N = 200</strong></span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">trt</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Drug A</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">98 (49%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Drug B</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">102 (51%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">stage</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T1</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">53 (27%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T2</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">54 (27%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T3</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">43 (22%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T4</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">50 (25%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">grade</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    I</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">68 (34%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    II</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">68 (34%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    III</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">64 (32%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">age</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">47 (38, 57)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Unknown</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">11</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"2\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span> <span data-qmd-base64=\"biAoJSk7IE1lZGlhbiAoUTEsIFEzKQ==\"><span class='gt_from_md'>n (%); Median (Q1, Q3)</span></span></td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\nYou'll note that the variable names are not very nice, and we could manually set these labels in the `tbl_summary` function, but a neat trick is to use the `labelled` package actually, which make it easy to set variable labels via a form of attribute.\n\nUnfortunately not everything in R knows to use these labels, but `gtsummary` does and for now that's good enough:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(labelled)\nvar_label(chemo$trt) <- \"Treatment Group\"\nvar_label(chemo$age) <- \"Age\"\nvar_label(chemo$stage) <- \"Stage\"\nvar_label(chemo$grade) <- \"Grade\"\nvar_label(chemo$marker) <- \"Marker (ng/mL)\"\nvar_label(chemo$response) <- \"Tumor Response\"\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nchemo |>\n    select(trt, stage, grade, age) |>\n    tbl_summary()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"pbbgyjxnxq\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#pbbgyjxnxq table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#pbbgyjxnxq thead, #pbbgyjxnxq tbody, #pbbgyjxnxq tfoot, #pbbgyjxnxq tr, #pbbgyjxnxq td, #pbbgyjxnxq th {\n  border-style: none;\n}\n\n#pbbgyjxnxq p {\n  margin: 0;\n  padding: 0;\n}\n\n#pbbgyjxnxq .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#pbbgyjxnxq .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#pbbgyjxnxq .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#pbbgyjxnxq .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#pbbgyjxnxq .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#pbbgyjxnxq .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pbbgyjxnxq .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#pbbgyjxnxq .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#pbbgyjxnxq .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#pbbgyjxnxq .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#pbbgyjxnxq .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#pbbgyjxnxq .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#pbbgyjxnxq .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#pbbgyjxnxq .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#pbbgyjxnxq .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#pbbgyjxnxq .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#pbbgyjxnxq .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#pbbgyjxnxq .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#pbbgyjxnxq .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pbbgyjxnxq .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#pbbgyjxnxq .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#pbbgyjxnxq .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#pbbgyjxnxq .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pbbgyjxnxq .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#pbbgyjxnxq .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#pbbgyjxnxq .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pbbgyjxnxq .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pbbgyjxnxq .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#pbbgyjxnxq .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pbbgyjxnxq .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#pbbgyjxnxq .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pbbgyjxnxq .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#pbbgyjxnxq .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pbbgyjxnxq .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#pbbgyjxnxq .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pbbgyjxnxq .gt_left {\n  text-align: left;\n}\n\n#pbbgyjxnxq .gt_center {\n  text-align: center;\n}\n\n#pbbgyjxnxq .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#pbbgyjxnxq .gt_font_normal {\n  font-weight: normal;\n}\n\n#pbbgyjxnxq .gt_font_bold {\n  font-weight: bold;\n}\n\n#pbbgyjxnxq .gt_font_italic {\n  font-style: italic;\n}\n\n#pbbgyjxnxq .gt_super {\n  font-size: 65%;\n}\n\n#pbbgyjxnxq .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#pbbgyjxnxq .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#pbbgyjxnxq .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#pbbgyjxnxq .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#pbbgyjxnxq .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#pbbgyjxnxq .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#pbbgyjxnxq .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#pbbgyjxnxq .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#pbbgyjxnxq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"label\"><span data-qmd-base64=\"PHN0cm9uZz5DaGFyYWN0ZXJpc3RpYzwvc3Ryb25nPg==\"><span class='gt_from_md'><strong>Characteristic</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_0\"><span data-qmd-base64=\"PHN0cm9uZz5OID0gMjAwPC9zdHJvbmc+\"><span class='gt_from_md'><strong>N = 200</strong></span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Treatment Group</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Drug A</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">98 (49%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Drug B</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">102 (51%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Stage</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T1</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">53 (27%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T2</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">54 (27%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T3</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">43 (22%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T4</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">50 (25%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Grade</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    I</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">68 (34%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    II</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">68 (34%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    III</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">64 (32%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Age</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">47 (38, 57)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Unknown</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">11</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"2\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span> <span data-qmd-base64=\"biAoJSk7IE1lZGlhbiAoUTEsIFEzKQ==\"><span class='gt_from_md'>n (%); Median (Q1, Q3)</span></span></td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\nMuch better.\n\nWe can also create groupings, for example by grade:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nchemo |>\n    select(trt, stage, grade, age) |>\n    tbl_summary(by = grade)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"kckjcdsaah\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#kckjcdsaah table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#kckjcdsaah thead, #kckjcdsaah tbody, #kckjcdsaah tfoot, #kckjcdsaah tr, #kckjcdsaah td, #kckjcdsaah th {\n  border-style: none;\n}\n\n#kckjcdsaah p {\n  margin: 0;\n  padding: 0;\n}\n\n#kckjcdsaah .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#kckjcdsaah .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#kckjcdsaah .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#kckjcdsaah .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#kckjcdsaah .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kckjcdsaah .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kckjcdsaah .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kckjcdsaah .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#kckjcdsaah .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#kckjcdsaah .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#kckjcdsaah .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#kckjcdsaah .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#kckjcdsaah .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#kckjcdsaah .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#kckjcdsaah .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#kckjcdsaah .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#kckjcdsaah .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#kckjcdsaah .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#kckjcdsaah .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kckjcdsaah .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#kckjcdsaah .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#kckjcdsaah .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#kckjcdsaah .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kckjcdsaah .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#kckjcdsaah .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#kckjcdsaah .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kckjcdsaah .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kckjcdsaah .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#kckjcdsaah .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kckjcdsaah .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#kckjcdsaah .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kckjcdsaah .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kckjcdsaah .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kckjcdsaah .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kckjcdsaah .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kckjcdsaah .gt_left {\n  text-align: left;\n}\n\n#kckjcdsaah .gt_center {\n  text-align: center;\n}\n\n#kckjcdsaah .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#kckjcdsaah .gt_font_normal {\n  font-weight: normal;\n}\n\n#kckjcdsaah .gt_font_bold {\n  font-weight: bold;\n}\n\n#kckjcdsaah .gt_font_italic {\n  font-style: italic;\n}\n\n#kckjcdsaah .gt_super {\n  font-size: 65%;\n}\n\n#kckjcdsaah .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#kckjcdsaah .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#kckjcdsaah .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#kckjcdsaah .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#kckjcdsaah .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#kckjcdsaah .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#kckjcdsaah .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#kckjcdsaah .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#kckjcdsaah div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"label\"><span data-qmd-base64=\"PHN0cm9uZz5DaGFyYWN0ZXJpc3RpYzwvc3Ryb25nPg==\"><span class='gt_from_md'><strong>Characteristic</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_1\"><span data-qmd-base64=\"PHN0cm9uZz5JPC9zdHJvbmc+PGJyIC8+Ck4gPSA2OA==\"><span class='gt_from_md'><strong>I</strong><br />\nN = 68</span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_2\"><span data-qmd-base64=\"PHN0cm9uZz5JSTwvc3Ryb25nPjxiciAvPgpOID0gNjg=\"><span class='gt_from_md'><strong>II</strong><br />\nN = 68</span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_3\"><span data-qmd-base64=\"PHN0cm9uZz5JSUk8L3N0cm9uZz48YnIgLz4KTiA9IDY0\"><span class='gt_from_md'><strong>III</strong><br />\nN = 64</span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Treatment Group</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Drug A</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">35 (51%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">32 (47%)</td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\">31 (48%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Drug B</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">33 (49%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">36 (53%)</td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\">33 (52%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Stage</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T1</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">17 (25%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">23 (34%)</td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\">13 (20%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T2</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">18 (26%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">17 (25%)</td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\">19 (30%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T3</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">18 (26%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">11 (16%)</td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\">14 (22%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T4</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">15 (22%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">17 (25%)</td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\">18 (28%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Age</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">47 (37, 56)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">49 (37, 57)</td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\">47 (38, 58)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Unknown</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">2</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">6</td>\n<td headers=\"stat_3\" class=\"gt_row gt_center\">3</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"4\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span> <span data-qmd-base64=\"biAoJSk7IE1lZGlhbiAoUTEsIFEzKQ==\"><span class='gt_from_md'>n (%); Median (Q1, Q3)</span></span></td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\nThere's a lot more we could do with this and you can learn all about it on the package's great documentation website at https://www.danieldsjoberg.com/gtsummary/.\n\n::: callout-note\nThe dataset `chemo` we used here is actually a slightly modified version of a dataset that comes with the `gtsumamry` package called `trial`!\nThe good thing is that the documentation examples for `gtsummary` should be enough to get you started with `chemo`!\n:::\n\n### Statistical Analysis\n\nDescribing the data is fine and all but what about statistics?\\\nWell, statistical analysis is not the focus of this course, but we can of course leverage some of the powerful tools at our disposal.\n\nLet's start with `ggstatsplot` again:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggstatsplot)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nYou can cite this package as:\n     Patil, I. (2021). Visualizations with statistical details: The 'ggstatsplot' approach.\n     Journal of Open Source Software, 6(61), 3167, doi:10.21105/joss.03167\n```\n\n\n:::\n:::\n\n\n\nWe most likely want to look at the tumor response between the treatment groups and see whether there is any significant difference.\\\nThe absolute numbers don't tell us too much yet:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nchemo |>\n  count(response, trt)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 3\n  response trt        n\n     <dbl> <chr>  <int>\n1        0 Drug A    69\n2        0 Drug B    66\n3        1 Drug A    29\n4        1 Drug B    36\n```\n\n\n:::\n:::\n\n\n\nThis function however does a lot more:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggbarstats(\n  data = chemo, \n  x = response, y = trt,\n  xlab = \"Treatment Group\",\n  ylab = \"Proportion\",\n  legend.title = \"Tumor Response\"\n)\n```\n\n::: {.cell-output-display}\n![](06-whole-game_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\nApart from displaying percentages on a stacked barchart, it also gives us information on the result of the statistical test used to see whether the proportions are equal between treatment groups or not --- and it looks like the result is not significant with p \\> 0.05\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggbetweenstats(\n  data = chemo, \n  x = trt, y = marker, \n  xlab = \"Treatment\", \n  ylab = \"Marker (ng/mL)\"\n)\n```\n\n::: {.cell-output-display}\n![](06-whole-game_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n::: callout-warning\nNote that packages like `ggstatsplot` make it quite easy to do all kinds of statistical tests all the time, but just like medical diagnostic tests, it isn't necessarily a good idea to test *everything*.\n:::\n\n### Advanced: Survival Curves\n\nAnother common type of plot to create is the Kaplan-Meier curve for each treatment group using the `time` survival time in months and the `status` survival indicator (0 for censoring, 1 for death).\\\nThe [`ggsurvfit`](https://www.danieldsjoberg.com/ggsurvfit/) package makes this very convenient:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"ggsurvfit\")\nlibrary(ggsurvfit)\n\nsurvfit2(Surv(time, status) ~ trt, data = chemo) |>\n  ggsurvfit(linewidth = 1) +\n  add_confidence_interval() +\n  add_risktable() +\n  add_quantile(y_value = 0.6, color = \"gray50\", linewidth = 0.75) +\n  scale_ggsurvfit()\n```\n:::\n",
    "supporting": [
      "06-whole-game_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}